<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="author" content="Ralf Schandl">
<title>Parseargs Tutorial</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.pygments .hll { background-color: #ffffcc }
pre.pygments { background: #f8f8f8; }
pre.pygments .tok-c { color: #3D7B7B; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #FF0000 } /* Error */
pre.pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666666 } /* Operator */
pre.pygments .tok-ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #9C6500 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gr { color: #E40000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #008400 } /* Generic.Inserted */
pre.pygments .tok-go { color: #717171 } /* Generic.Output */
pre.pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
pre.pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #B00040 } /* Keyword.Type */
pre.pygments .tok-m { color: #666666 } /* Literal.Number */
pre.pygments .tok-s { color: #BA2121 } /* Literal.String */
pre.pygments .tok-na { color: #687822 } /* Name.Attribute */
pre.pygments .tok-nb { color: #008000 } /* Name.Builtin */
pre.pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #880000 } /* Name.Constant */
pre.pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
pre.pygments .tok-ni { color: #717171; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
pre.pygments .tok-nf { color: #0000FF } /* Name.Function */
pre.pygments .tok-nl { color: #767600 } /* Name.Label */
pre.pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #19177C } /* Name.Variable */
pre.pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
pre.pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
pre.pygments .tok-se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #008000 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #A45A77 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Parseargs Tutorial</h1>
<div class="details">
<span id="author" class="author">Ralf Schandl</span><br>
<span id="revnumber">version {version},</span>
<span id="revdate">2023-08-27</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#POSIX">1. POSIX Shells</a>
<ul class="sectlevel2">
<li><a href="#_simple_usage">1.1. Simple Usage</a></li>
<li><a href="#_long_options">1.2. Long Options</a></li>
<li><a href="#_counting_options">1.3. Counting Options</a></li>
<li><a href="#_mode_switch_options">1.4. Mode Switch Options</a></li>
<li><a href="#_required_options">1.5. Required Options</a></li>
<li><a href="#_showing_help_and_version">1.6. Showing Help and Version</a></li>
<li><a href="#CALLBACKS">1.7. Using Callbacks</a></li>
<li><a href="#_a_script_without_options">1.8. A Script without Options</a></li>
<li><a href="#_the_option_argument_separator">1.9. The Option Argument Separator '--'</a></li>
<li><a href="#_initializing_variables">1.10. Initializing Variables</a></li>
<li><a href="#SINGLETON_OPTS">1.11. Singleton Options</a></li>
</ul>
</li>
<li><a href="#EXTENDED">2. Extended Shells</a>
<ul class="sectlevel2">
<li><a href="#_separating_arguments_behind_a">2.1. Separating Arguments behind a <code>--</code></a></li>
</ul>
</li>
<li><a href="#_details">3. Details</a>
<ul class="sectlevel2">
<li><a href="#_support_for_different_shells">3.1. Support for Different Shells</a></li>
<li><a href="#_parseargs_and_shellcheck">3.2. Parseargs and ShellCheck</a></li>
<li><a href="#_parseargs_and_invalid_utf_8">3.3. Parseargs and Invalid UTF-8</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Parseargs is a command line option parser for shell scripts.</p>
</div>
<div class="paragraph">
<p>This tutorial explains the features of Parseargs using examples.</p>
</div>
<div class="paragraph">
<p>The first section <a href="#POSIX">POSIX Shells</a> treats all functionality that works in a POSIX compliant shell.
Also <em>zsh</em> is not POSIX compliant (and never wanted to be), the mentioned features should run with it.</p>
</div>
<div class="paragraph">
<p>The second section <a href="#EXTENDED">Extended Shells</a> handles those few features that need functionality beyond the POSIX standard.
Currently there is only on feature, that requires the support of array variables.
The shells <em>bash</em>, <em>ksh</em> and <em>zsh</em> provide this.
These shells can be enabled by using the option <code>-s</code> / <code>--shell</code> with the shell name.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When <em>ksh</em> is mentioned in this document, we are talking about <em>ksh92</em> or newer.
Parseargs was never tested with <em>ksh88_</em>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="POSIX">1. POSIX Shells</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_simple_usage">1.1. Simple Usage</h3>
<div class="paragraph">
<p>The following script should support two options and arguments.
The options are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-l</code>  to enable "long" output.</p>
</li>
<li>
<p><code>-o &lt;filename&gt;</code> to define a file to write to</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Script <code>example.sh</code></div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span>#!/bin/sh

eval &quot;$(parseargs -n example.sh -o &#39;l#long_output,o=outfile&#39; -- &quot;$@&quot;)&quot; || exit 1

if [ -n &quot;$long_output&quot; ]; then
    echo &quot;Long output is enabled&quot;
fi
echo &quot;Output file: &#39;$outfile&#39;&quot;
echo &quot;Arguments: $*&quot;
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="paragraph">
<p>Before testing lets look at the options and arguments given to Parseargs.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>-n example.sh</code></dt>
<dd>
<p>This tells Parseargs the name of the calling script.
The name is used as prefix for error messages.</p>
</dd>
<dt class="hdlist1"><code>-o 'l#long_output,o=outfile'</code></dt>
<dd>
<p>This defines two options, separated by a comma.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>l#long_output</code></dt>
<dd>
<p>This definition defines a simple flag.
The <code>#</code> in the middle is the marker for a flag.
The part before defines the option character.
Here <code>l</code> defines the option <code>-l</code>.
The part after the <code>#</code> is the variable that should be set, when <code>-l</code> was found on the command line. The variable gets the value "true" assigned.</p>
</dd>
<dt class="hdlist1"><code>o=outfile</code></dt>
<dd>
<p>This definition defines a assignment option.
A assignment option needs an additional argument.
The <code>=</code> in the middle is the marker for a assignment.
Again the part before defines the option.
Here <code>-o</code>.
The part after the marker is the name of the variable.
This variable gets the option argument assigned.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>--</code></dt>
<dd>
<p>The double dash separates the Parseargs options from the shell script options.</p>
</dd>
<dt class="hdlist1"><code>"$@"</code></dt>
<dd>
<p>This is replaced by the script options.
Always use exactly this notation.
A simple <code>$@</code> (without the quotes) or <code>$*</code> might fail.
See your shell documentation.</p>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The option character may be any ASCII character, except for <code>-</code> (minus), whitespace or control character.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The trailing <code>|| exit 1</code> is just a safety net, in case something goes wrong during eval.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s test the script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./example.sh -l -o out.file in.file other.file
Long output is enabled
Output file: 'out.file'
Arguments: in.file other.file</pre>
</div>
</div>
<div class="paragraph">
<p>No space needed between <code>-o</code> and the file name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./example.sh -l -oout.file in.file other.file
Long output is enabled
Output file: 'out.file'
Arguments: in.file other.file</pre>
</div>
</div>
<div class="paragraph">
<p>And <code>-l</code> and <code>-o</code> can be combined into one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./example.sh -loout.file in.file other.file
Long output is enabled
Output file: 'out.file'
Arguments: in.file other.file</pre>
</div>
</div>
<div class="paragraph">
<p>Options and argument order is not relevant:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./example.sh -l in.file other.file -oout.file
Long output is enabled
Output file: 'out.file'
Arguments: in.file other.file</pre>
</div>
</div>
<div class="paragraph">
<p>Using a unknown option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./example.sh -X
example.sh: Unknown option: '-X'</pre>
</div>
</div>
<div class="paragraph">
<p>Duplicate options are not allowed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./example.sh -o out.file -o other-out.file  in.file
example.sh: Duplicate option: '-o'

$ ./example.sh -l -l -o out.file  in.file
example.sh: Duplicate option: '-l'</pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">How does this work?</div>
<div class="paragraph">
<p>To understand how Parseargs works, it can simply be called from the command line.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ parseargs -n example.sh -o 'l#long_output,o=outfile' -- -l -o out.file in.file other.file
long_output='true';
outfile='out.file';
set -- 'in.file' 'other.file'</pre>
</div>
</div>
<div class="paragraph">
<p>First the potentially used variables are defined.
As <code>-l</code> is given, the variable assignment <code>long_output='true'</code> is generated.
And due to <code>-o out.file</code> the assignment <code>outfile='out.file</code> is added.
Finally with <code>set&#8201;&#8212;&#8201;&#8230;&#8203;</code> the positional parameter (<code>$1</code>, <code>$2</code> &#8230;&#8203;) are assigned.</p>
</div>
<div class="paragraph">
<p>Here is what happens, when an unknown option is found:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ parseargs -n example.sh -o 'l#long_output,o=outfile' -- -X
example.sh: Unknown option: -X
exit 1</pre>
</div>
</div>
<div class="paragraph">
<p>The error message "example.sh: Unknown option: -X" is written to STDERR.</p>
</div>
<div class="paragraph">
<p>Or here the argument for the option -o is missing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ parseargs -n example.sh -o 'l#long_output,o=outfile' -- -o
example.sh: Missing argument for: -o
exit 1</pre>
</div>
</div>
<div class="paragraph">
<p>Note that the error messages are printed to STDERR by parseargs.
Only <code>exit 1;</code> is printed to STDOUT and hence evaluated by <code>eval</code> when used in a script.</p>
</div>
<div class="paragraph">
<p>Just play around with Parseargs.
Use arguments with spaces or special character.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_long_options">1.2. Long Options</h3>
<div class="paragraph">
<p>A lot of programs support additional long forms of options.
Like <code>-l</code> and <code>--long</code>.
Parseargs also supports this:</p>
</div>
<div class="listingblock">
<div class="title">Script <code>long-opt.sh</code></div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span>#!/bin/sh

eval &quot;$(parseargs -n long-opt.sh -o &#39;l:long#long_output,o:out-file=outfile&#39; -- &quot;$@&quot;)&quot; || exit 1

if [ -n &quot;$long_output&quot; ]; then
    echo &quot;Long output is enabled&quot;
fi
echo &quot;Output file: &#39;$outfile&#39;&quot;
echo &quot;Arguments: $*&quot;

</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we have two colon-separated options before the type marker (<code>#</code>, <code>=</code>).
If a option is a single character, it defines a short option (<code>l</code> &#8594; <code>-l</code>).
With multiple characters it is a long option, that has two leading dashes (<code>long</code> &#8594; <code>--long</code>).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Long options may contain any ASCII character, except for  <code>=</code>, whitespace or control character. The <code>-</code> (minus) is not allowed as the first character.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now our example script enables long output by either using <code>-l</code> or <code>--long</code> and the output file can be set with <code>-o out.file</code> or <code>--out-file out.file</code> or even <code>--out-file=out.file</code>.</p>
</div>
<div class="paragraph">
<p>Again some tests:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./long-opt.sh --long --out-file out.file in.file other.file
Long output is enabled
Output file: 'out.file'
Arguments: in.file other.file

$ ./long-opt.sh --long --out-file=out.file in.file other.file
Long output is enabled
Output file: 'out.file'
Arguments: in.file other.file</pre>
</div>
</div>
<div class="paragraph">
<p>Duplicate option detection still works:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./long-opt.sh --long -l
long-opt.sh: Duplicate option: '-l/--long'</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Long Options and Optional Arguments</strong></p>
</div>
<div class="paragraph">
<p>With long options an optional argument is supported for flag options.
This optional argument is directly appended to the option with a <code>=</code> and the values <code>true</code> and <code>yes</code> (case-insensitive) are interpreted as boolean true.</p>
</div>
<div class="paragraph">
<p>So, to reuse the example above:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./long-opt.sh --long=true --out-file=out.file in.file
Long output is enabled
Output file: 'out.file'
Arguments: in.file

$ ./long-opt.sh --long=yes --out-file=out.file in.file
Long output is enabled
Output file: 'out.file'
Arguments: in.file

$ ./long-opt.sh --long=false --out-file=out.file in.file
Output file: 'out.file'
Arguments: in.file

$ ./long-opt.sh --long=anything --out-file=out.file in.file
Output file: 'out.file'
Arguments: in.file</pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">By the Way &#8230;&#8203;.</div>
<div class="paragraph">
<p>It is possible to define multiple short and long options.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span>eval &quot;$(parseargs -n long-opt.sh -o &#39;l:long:D:detailed#long_output,...&#39; -- &quot;$@&quot;)&quot; || exit 1
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now <code>-l</code>, <code>--long</code>, <code>-D</code> and <code>--detailed</code> all would enable long output.
I don&#8217;t know how useful this is, but it is possible.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_counting_options">1.3. Counting Options</h3>
<div class="paragraph">
<p>Tools sometimes have an option to increase verbosity of the output.
Example from the ssh man page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">-v      Verbose mode.  Causes ssh to print debugging messages about its
        progress.  This is helpful in debugging connection, authentica‐
        tion, and configuration problems.  Multiple -v options increase
        the verbosity.  The maximum is 3.</pre>
</div>
</div>
<div class="paragraph">
<p>Parseargs has an own option type to support this.
A "Counting Option" is defined using the marker <code>+</code>.</p>
</div>
<div class="paragraph">
<p>The following script only supports the options <code>-v</code> and <code>--verbose</code>.</p>
</div>
<div class="listingblock">
<div class="title">Script <code>verbosity.sh</code></div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span>#!/bin/sh

eval &quot;$(parseargs -n verbosity.sh -o &#39;v:verbose+verbosity&#39; -- &quot;$@&quot;)&quot; || exit 1

echo &quot;Verbosity: $verbosity&quot;
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./verbosity.sh
Verbosity: 0

$ ./verbosity.sh -v
Verbosity: 1

$ ./verbosity.sh -vvv
Verbosity: 3

$ ./verbosity.sh -vvvvvvv
Verbosity: 7</pre>
</div>
</div>
<div class="paragraph">
<p>The long option form additionally supports a optional argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./verbosity.sh --verbose
Verbosity: 1

$ ./verbosity.sh --verbose -v
Verbosity: 2

$ ./verbosity.sh --verbose=5
Verbosity: 5

$ ./verbosity.sh --verbose=full
verbosity.sh: Not a valid count value: "full"</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The long form with optional argument sets the verbosity, it does not increase it by the given number.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./verbosity.sh -vv --verbose=5
Verbosity: 5</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mode_switch_options">1.4. Mode Switch Options</h3>
<div class="paragraph">
<p>A Mode Switch Options are not a new option type, but a extension of a simple flag.
Mode switches use one variable with different options and assign different values to the variable.</p>
</div>
<div class="paragraph">
<p>A simple example would be whether something should be copied or moved.
In that case the option <code>-c</code> would request to copy and <code>-m</code> would request move.</p>
</div>
<div class="paragraph">
<p>The definition of such options look like normal flags, but have a equal sign and a value appended.</p>
</div>
<div class="listingblock">
<div class="title">Script <code>mode-switch.sh</code></div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span>#!/bin/sh

eval &quot;$(parseargs -n mode-switch.sh -o &#39;c:copy#mode=copy,m:move#mode=move&#39; -- &quot;$@&quot;)&quot; || exit 1

echo &quot;Mode: $mode&quot;
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="paragraph">
<p>And here some tests:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./mode-switch.sh -c
Mode: copy

$ ./mode-switch.sh -m
Mode: move

$ ./mode-switch.sh -cm
mode-switch.sh: Options are mutual exclusive: -c/--copy, -m/--move</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_required_options">1.5. Required Options</h3>
<div class="paragraph">
<p>Sometimes a option might be required. Parseargs supports this with a asterisk before the variable name.</p>
</div>
<div class="listingblock">
<div class="title">Script <code>required.sh</code></div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span>#!/bin/sh

eval &quot;$(parseargs -n required.sh -o &#39;o=*out_file&#39; -- &quot;$@&quot;)&quot; || exit 1

echo &quot;Output file: $out_file&quot;
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="paragraph">
<p>And now a test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./required.sh -o output.file
Output file: output.file

$ ./required.sh
required.sh: Required option not found: -o</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_showing_help_and_version">1.6. Showing Help and Version</h3>
<div class="paragraph">
<p>First up: Parseargs itself does not support creating help texts.
But Parseargs can call a existing shell function that prints some help text.</p>
</div>
<div class="paragraph">
<p>With the Parseargs option <code>-h</code> / <code>--help-opt</code>, the script option <code>--help</code> is supported.
If the option is given, the shell function <code>show_help</code> is called and the script is terminated with exit code 0.</p>
</div>
<div class="paragraph">
<p>To display the script version, the Parseargs option <code>-v</code> / <code>--version-opt</code> enables support for the script option <code>--version</code>.
If the option is given, the shell function <code>show_version</code> is called and the script is terminated with exit code 0.</p>
</div>
<div class="paragraph">
<p>The script must define the named <code>show_*</code> functions.
If they are not defined, a error message is displayed and the script is terminated.</p>
</div>
<div class="listingblock">
<div class="title">Script <code>help.sh</code></div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span>#!/bin/sh

show_help()
{
    echo &quot;Usage: example.sh OPTIONS &lt;input-file...&gt;&quot;
    echo &quot;  -l, --long           enable detailed output&quot;
    echo &quot;  -o, --out-file FILE  file to write result&quot;
}

show_version()
{
    echo &quot;help.sh 1.0&quot;
}


eval &quot;$(parseargs -n help.sh.sh -hv -o &#39;l:long#detailed,o:out-file=outfile&#39; -- &quot;$@&quot;)&quot; || exit 1
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="paragraph">
<p>Displaying help and version:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./help.sh --help
Usage: example.sh OPTIONS &lt;input-file...&gt;
  -l, --long           enable detailed output
  -o, --out-file FILE  file to write result

$ ./help.sh --version
help.sh 1.0</pre>
</div>
</div>
<div class="paragraph">
<p>To better understand how this works, see the sections <a href="#CALLBACKS">Using Callbacks</a> and <a href="#SINGLETON_OPTS">Singleton Options</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="CALLBACKS">1.7. Using Callbacks</h3>
<div class="paragraph">
<p>Till now we used Parseargs to assign variables for the options found on the command line, but it is also able to work with shell functions.</p>
</div>
<div class="paragraph">
<p>When using functions, Parseargs also generates code to test for the existence of the function.
Assuming a function <code>set_out_file</code> should be used, the following code will always be generated (here for bash):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span>typeset -f set_out_file &gt;/dev/null 2&gt;&amp;1 || { echo &gt;&amp;2 &quot;ERROR: Function set_out_file does not exist.&quot;;exit 127; };
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="paragraph">
<p>This code will exit the calling script if the function does not exist.
This check is always done, whether the function is needed in the actually generated code or not.</p>
</div>
<div class="paragraph">
<p>When calling the callback the exit status of the function must be zero else the calling script is terminated with function exit code.
The code for this looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span>set_out_file &#39;output.file&#39; || exit $?
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_callbacks_for_options">1.7.1. Callbacks for Options</h4>
<div class="paragraph">
<p>Instead of assigning variables for options, it is also possible to call a function.
By adding <code>()</code> to the name, it defines the function to call.</p>
</div>
<div class="listingblock">
<div class="title">Script <code>option-cb.sh</code></div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span>#!/bin/sh

set_long() { echo &quot;set_long($1)&quot;; }
set_outfile() { echo &quot;set_outfile($1)&quot;; }
set_verbosity() { echo &quot;set_verbosity($1)&quot;; }

eval &quot;$(parseargs -n option-cb.sh -o &#39;l:long#set_long(),o=set_outfile(),v+set_verbosity()&#39; -- &quot;$@&quot;)&quot; || exit 1

echo &quot;Arguments: $*&quot;
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="paragraph">
<p>Testing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./option-cb.sh -v -l -o out.file -vv input
set_verbosity(1)
set_long(true)
set_outfile(out.file)
set_verbosity(3)
Arguments: input

$ ./option-cb.sh --long=false input
set_long()
Arguments: input</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For counting options, the callback might be called multiple times with the current count value.</p>
</li>
<li>
<p>For flags it is called with a value <code>'true'</code>.
If the option explicitly is set to <code>false</code> using <code>--option=false</code>, the callback is called with an empty string.</p>
</li>
<li>
<p>For assignment options the callback is called with the option argument.</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Using a callback disables checks within Parseargs.</p>
</div>
<div class="paragraph">
<p>The duplicate usage of options is not checked and also the duplicate usage of mode-switch options are not detected.</p>
</div>
<div class="paragraph">
<p>With callbacks you have more control and possibilities, but also more responsibilities.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_callback_for_arguments">1.7.2. Callback for Arguments</h4>
<div class="paragraph">
<p>In the previous sections we have seen callbacks for options, this is also possible for program arguments.</p>
</div>
<div class="paragraph">
<p>The callback for program arguments is defined with the Parseargs option <code>-a</code> or <code>--arg-callback</code>.</p>
</div>
<div class="listingblock">
<div class="title">Script <code>args-cb.sh</code></div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span>#!/bin/sh

set_argument() { echo &quot;set_argument($1)&quot;; }

eval &quot;$(parseargs -n args-cb.sh -a set_argument -o &#39;&#39; -- &quot;$@&quot;)&quot; || exit 1
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="paragraph">
<p>When the argument callback is used, the positional parameters are always empty.
So <code>$1</code> etc are unset.</p>
</div>
</div>
<div class="sect3">
<h4 id="_callback_on_error">1.7.3. Callback on Error</h4>
<div class="paragraph">
<p>Parseargs allows the defition of an error callback.
This defines a function that is called before Parseargs emits <code>exit 1</code> to terminate the calling script.</p>
</div>
<div class="paragraph">
<p>The following example doesn&#8217;t support any options and insults you when you give one.</p>
</div>
<div class="listingblock">
<div class="title">Script <code>error-cb.sh</code></div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span>#!/bin/sh

error_callback() { echo &quot;You did something stupid!&quot;; }

eval &quot;$(parseargs -n error-cb.sh -e error_callback -o &#39;&#39; -- &quot;$@&quot;)&quot; || exit 1

echo &quot;OK&quot;
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./error-cb.sh
OK

$ ./error-cb.sh -x
error-cb.sh: Unknown option: -x
You did something stupid!
$</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_a_script_without_options">1.8. A Script without Options</h3>
<div class="paragraph">
<p>Parseargs if even useful in scripts that don&#8217;t support any options.
In that use case it would output an error message when a option is given.</p>
</div>
<div class="listingblock">
<div class="title">Script <code>no-opt.sh</code></div>
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span>#!/bin/sh

eval &quot;$(parseargs -n no-opt.sh -p -- &quot;$@&quot;)&quot;

echo &quot;Arguments: $*&quot;
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this script we also use the option <code>-p</code> / <code>--posix</code>, then Parseargs stops looking for options as soon as the first program argument is found.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./no-opt.sh first second
Arguments: first second

$ ./no-opt.sh -X first second
no-opt.sh: Unknown option: -X

$ ./no-opt.sh  first second -X
Arguments: first second -X</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_option_argument_separator">1.9. The Option Argument Separator '--'</h3>
<div class="paragraph">
<p>POSIX defines the <code>--</code> as a separator between options and program arguments.</p>
</div>
<div class="paragraph">
<p>Reusing our first script <code>example.sh</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ ./example.sh -o out.file -X
example.sh: Unknown option: -X

$ ./example.sh -o out.file -- -X
Output file: 'out.file'
Arguments: -X</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_initializing_variables">1.10. Initializing Variables</h3>
<div class="paragraph">
<p>With the option <code>-i</code> / <code>--init-vars</code> the variables can be initialized with their default values.
Note, that variables of counting options are always initialized to 0.
This is useful, when the script runs with <code>set -u</code> to treat unset variables as error.</p>
</div>
<div class="paragraph">
<p>Note that this is for variables only. Callbacks are not called.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ parseargs -n example.sh -o 'l#long,o=outfile,v+verbosity' --init-vars -- -o out.file -l
long='';
outfile='';
verbosity=0;
outfile='out.file';
long='true';
set --</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="SINGLETON_OPTS">1.11. Singleton Options</h3>
<div class="paragraph">
<p>A Singleton Option is an option that supersede all other options or arguments on the command line.
The typical use for this is a help option.
In fact the support for <code>--help</code> is implemented using this.</p>
</div>
<div class="paragraph">
<p>A option is marked as a by putting a <code>?</code> in front of the function name (variables are rarely used here).
The following is used to support <code>--help</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">help#?show_help()</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>?</code> tells Parseargs that this is a singleton option and that</p>
</div>
<div class="ulist">
<ul>
<li>
<p>only this option should be processed.</p>
</li>
<li>
<p>all other content of the command line should be dropped. (The content before the <code>--help</code> must still be valid.)</p>
</li>
<li>
<p>the calling script should be terminated with exit code 0 if the target is a callback.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So this can be easily used to implement additional help options.
Maybe <code>--help-storage#?show_help_storage()</code>.</p>
</div>
<div class="paragraph">
<p>This feature can also be used for other things.
The following is from a script that is used as an unpacker for arbitrary archives.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span>eval &quot;$(parseargs -hin ERROR -o &quot;l#mode=listMode,L#mode=topLevelList,D#mode=basenameDir,S#mode=singleDir,T#?checkPrograms(),d=tgtDir,v+verbose&quot; -- &quot;$@&quot;)&quot; || exit 1
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="paragraph">
<p>The interesting part is <code>T#?checkPrograms()</code>.
This defines the option <code>-T</code> as a singleton option, that calls the function <code>checkPrograms</code>.
In the actual script the <code>-T</code> triggers a test whether the needed tools are available and hence which archive types are supported.
After this test is completed, the script is terminated.
No other actions is performed, independent of other options given on the command line.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="EXTENDED">2. Extended Shells</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes functionalities, that need additional capabilities beyond those defined by POSIX.</p>
</div>
<div class="sect2">
<h3 id="_separating_arguments_behind_a">2.1. Separating Arguments behind a <code>--</code></h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Only supported with shells <code>bash</code>, <code>ksh</code> or <code>zsh</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Sometimes it is useful to handle the arguments before and after a <code>--</code> differently.</p>
</div>
<div class="paragraph">
<p>The following command monitors the file <code>tutorial.adoc</code> and executes the command <code>make html</code> as soon as a change is detected.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ when-changed tutorial.adoc -- make html</pre>
</div>
</div>
<div class="paragraph">
<p>Here the arguments before the <code>--</code> are different than the arguments behind it.</p>
</div>
<div class="paragraph">
<p>Parseargs is able to collect the arguments behind the <code>--</code> in a shell array and leave the arguments before it as positional parameter (<code>$1</code>&#8230;&#8203;).
The option <code>-r</code> / <code>--remainder</code> is used to define the name of the array.</p>
</div>
<div class="paragraph">
<p>The Parseargs call for this would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span>eval &quot;$(parseargs -s bash --remainder cmd -h -- &quot;$@&quot;)&quot; || exit 1
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
<div class="paragraph">
<p>Assuming the call above, the name <code>tutorial.adoc</code> would be available as <code>$1</code> and the words <code>make</code> and <code>html</code> as <code>${cmd[0]}</code> and <code>$cmd[1]}</code>.</p>
</div>
<div class="paragraph">
<p>Note that in <em>zsh</em> it would be <code>${cmd[1]}</code> and <code>$cmd[2]}</code>, as arrays in <em>zsh</em> are 1-based.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_details">3. Details</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_support_for_different_shells">3.1. Support for Different Shells</h3>
<div class="paragraph">
<p>Parseargs supports generating code for different shells. The following shells are supported:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>--shell=sh</code> (the default)</dt>
<dd>
<p>With this setting, code for a POSIX compliant shell is generated.
This should work with any POSIX compliant shell and with <em>zsh</em>.
The option <code>-r</code> / <code>--remainder</code> is not supported.</p>
</dd>
<dt class="hdlist1"><code>--shell=bash</code>, <code>--shell=ksh</code> and <code>--shell=zsh</code></dt>
<dd>
<p>This shells support all features of Parseargs.
The code generated is (as of today) identical, except for array initialization, which is different in <em>ksh</em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_parseargs_and_shellcheck">3.2. Parseargs and ShellCheck</h3>
<div class="paragraph">
<p><a href="https://github.com/koalaman/shellcheck">ShellCheck</a> is a static code analysis
tool for shell scripts.
If you don&#8217;t use it yet, you really should.</p>
</div>
<div class="paragraph">
<p>As Parseargs is creating and assigning new variables at runtime, ShellCheck can&#8217;t know about them and will complain.
For our first example the following output would be created:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">In example.sh line 8:
echo "Output file: '$outfile'"
                    ^------^ SC2154 (warning): outfile is referenced but not assigned.

For more information:
  https://www.shellcheck.net/wiki/SC2154 -- outfile is referenced but not ass...</pre>
</div>
</div>
<div class="paragraph">
<p>The best solution is to initialize default values before calling Parseargs.</p>
</div>
<div class="paragraph">
<p>Like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight nowrap"><code data-lang="source"><div class="lineno"><table class="linenotable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span>#!/bin/sh

long_output=
outfile=
eval &quot;$(parseargs -n example.sh -o &#39;l#long_output,o=outfile&#39; -- &quot;$@&quot;)&quot; || exit 1
</pre></div></td></tr></table></div></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_parseargs_and_invalid_utf_8">3.3. Parseargs and Invalid UTF-8</h3>
<div class="paragraph">
<p>As of today, Parseargs can only handle arguments that are valid UTF-8.</p>
</div>
<div class="paragraph">
<p>If a invalid UTF-8 character is found, Parseargs will display an error message and exit the calling script.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version {version}<br>
Last updated 2023-08-27 11:29:25 UTC
</div>
</div>
</body>
</html>